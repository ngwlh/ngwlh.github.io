<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Mayro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Mayro">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Mayro">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mayro">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Mayro" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Mayro</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-youku" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/youku/" class="article-date">
  <time datetime="2015-08-06T08:33:28.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/youku/">youku</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div class="video-container"><iframe src="//http://v.youku.com/v_show/id_XMTMwMTk2OTg4NA==_ev_1.html" frameborder="0" allowfullscreen></iframe></div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/youku/" data-id="ciczy5jbe0004dgm3cq5p13ot" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-利用Spring-Boot-快速搭建项" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/利用Spring-Boot-快速搭建项/" class="article-date">
  <time datetime="2015-08-06T08:20:08.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/利用Spring-Boot-快速搭建项/">利用Spring Boot 快速搭建项</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天给大家介绍一个好玩的东西 —— Spring Boot 项目。</p>
<p>Java Web项目的开发人员绝大部分应该都接触过，或者至少是听说过Spring，使用Spring的其中的一个很重要的优势是可以很便利地和广大的Java开源项目进行整合，从而实现功能强大的应用系统。</p>
<p>如果你有过Spring项目的开发经验，肯定会对Spring的各种配置文件、以及种类繁多的各种依赖Jar文件印象深刻，也或者你正在为此类问题忙得焦头烂额，而接下来准备介绍的这个Spring Boot可以把你从繁琐的配置上解放出来，让你可以专注于业务的开发。</p>
<p>Spring Boot充分利用了JavaConfig的配置模式以及“约定优于配置”的理念，能够极大的简化基于Spring MVC的Web应用和REST服务开发，我们先来看看可以搭建Spring项目可以“快”到什么程度：</p>
<p>参考如下目录结构，建立Maven项目<br>│ pom.xml │ ├─src │ ├─main │ │ ├─java │ │ │ └─com.ab.bfb.sunnycoffee.examples.boot │ │ │ │ Application.java │ │ │ │ │ │ │ └─web │ │ │ └─controller │ │ │ SampleController.java │ │ │ │ │ └─resources │ │ │ └─test │ └─java</p>
<p>在pom.xml加入如下配置，导入Spring Boot需要的依赖，以及运行和打包项目的插件<br>org.springframework.boot spring-boot-dependencies 1.2.2.RELEASE pom import org.springframework.boot spring-boot-starter-web 1.2.2.RELEASE<br>org.springframework.boot spring-boot-maven-plugin 1.2.2.RELEASE 3. 在 SampleController.java 中加入如下代码，实现一个简单的Spring MVC页面控制器：</p>
<p>@Controller public class SampleController {</p>
<p>@RequestMapping(“/“)<br>@ResponseBody<br>String home() { return “Hello World!”; }</p>
<p>} 4.在 Application.java 中加入如下代码，作为项目启动入口：</p>
<p>@SpringBootApplication public class Application { public static void main(String[] args) throws Exception { SpringApplication.run(Application.class, args); } } 5. 打开命令行，切换到项目目录，运行一下Maven命令：mvn spring-boot:run</p>
<p>好了，见证奇迹的时刻！打开浏览器，访问：<a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a> ，你将会看到令人激动的“Hello World！”的页面输出。</p>
<p>当然，如果要作为生产项目，使用Spring Boot接下来还是会碰到很多问题。更多信息请参考官方手册： <a href="http://docs.spring.io/spring-boot/docs/1.2.3.BUILD-SNAPSHOT/reference/htmlsingle/" target="_blank" rel="external">http://docs.spring.io/spring-boot/docs/1.2.3.BUILD-SNAPSHOT/reference/htmlsingle/</a></p>
<p>另外Spring Boot项目不建议使用JSP作为视图，如果需要使用JSP视图，请参考SunnyCoffee的“sunny-coffee-boot-jsp”示例项目。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/利用Spring-Boot-快速搭建项/" data-id="ciczy5jaz0002dgm3608hv9n3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-关于软件设计阶段需求分析与设计的一点看法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/关于软件设计阶段需求分析与设计的一点看法/" class="article-date">
  <time datetime="2015-08-06T08:15:39.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/关于软件设计阶段需求分析与设计的一点看法/">关于软件设计阶段需求分析与设计的一点看法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在基金支付项目过程中，从项目开发到测试完成耗时3个月之久，虽然在这期间有第三方的问题，但是我们自身的问题非常多，比如需求不确定、流程不明确、与第三方沟通不深导致整个流程修改，也遇到过由于数据表设计不够完善导致表结构的改动。</p>
<p>在我看来这里面主要的问题是出在需求分析及设计上，没有经过讨论仅仅靠个人对需求的理解就确定系统流程是不完善的，没有进行过系统模块结构设计、流程设计、数据库设计就直接进行代码开发的风险很大，虽然基金支付这个项目并不大，而且大部分流程都十分简单，</p>
<p>但也不能直接进行代发开发、边开发边确定模块、流程、数据库表，在项目初期大部分风险都是可以预估及避免的。下面就需求分析及设计提出几个建议： 1.在整个项目开发期间，业务人员和开发人员必须天天都在一起工作。需求是一个概念性的东西，内在的很多东西都是不确定的，所以需要进行需求分析将它确定下来，通过模块结构设计、流程设计、数据库设计进一步固化，在设计时考虑后续的需求变化以及程序的可延展性，保证提供有价值的软件。需求说明书与需求规格说明书是非常重要的，《用户需求说明书》是用用户的语言进行描述，让用户和开发团队对于需求的达成一致的理解，《需求规格说明书》，则是对用户需求的分析，形成系统要具有的功能，这个是真正提供用户可交互操作的文档，也就是后期设计和代码开发的重要基线 2.涉及到的第三方必须前期进行深度交流沟通，确定每一个流程、接口细节，最具有效果并富有效率的传递信息的方法，就是面对面的交谈。 3.简单是最根本的，无论模块、流程、还是数据库都必须简单有效，因为当需求开始进行变化时我们的程序会渐渐出现下面几个特点<br>•僵化性：很难对系统进行改动，因为每个改动都会迫使许多对系统其他部分的其它改动。</p>
<p>•脆弱性：对系统的改动会导致系统中和改动的地方在概念上无关的许多地方出现问题。</p>
<p>•牢固性：很难解开系统的纠结，使之成为一些可在其他系统中重用的组件。</p>
<p>•粘滞性：做正确的事情比做错误的事情要困难。</p>
<p>•不必要的复杂性：设计中包含有不具任何直接好处的基础结构。</p>
<p>•不必要的重复性：设计中包含有重复的结构，而该重复的结构本可以使用单一的抽象进行统一。</p>
<p>•晦涩性：很难阅读、理解。没有很好地表现出意图。 所以在程序中要避免复杂化、严谨化，尽量做到开放可变动的。</p>
<p>4.制定计划，并且所有人员都必须严格按照此计划进行，除非有特别大的变动，进行相应的计划修整。计划要细分到各个功能模块，人员安排及时间点。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/关于软件设计阶段需求分析与设计的一点看法/" data-id="ciczy5jbe0003dgm3z8tbuxqh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-awk命令详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/linux-awk命令详解/" class="article-date">
  <time datetime="2015-08-06T08:14:31.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/linux-awk命令详解/">linux awk命令详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>简介</p>
<p>awk是一个强大的文本分析工具，相对于grep的查找，sed的编辑，awk在其对数据分析并生成报告时，显得尤为强大。简单来说awk就是把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行各种分析处理。</p>
<p>awk有3个不同版本: awk、nawk和gawk，未作特别说明，一般指gawk，gawk 是 AWK 的 GNU 版本。</p>
<p>awk其名称得自于它的创始人 Alfred Aho 、Peter Weinberger 和 Brian Kernighan 姓氏的首个字母。实际上 AWK 的确拥有自己的语言： AWK 程序设计语言 ， 三位创建者已将它正式定义为“样式扫描和处理语言”。它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表，还有无数其他的功能。</p>
<p>使用方法</p>
<p>awk ‘{pattern + action}’ {filenames}</p>
<p>尽管操作可能会很复杂，但语法总是这样，其中 pattern 表示 AWK 在数据中查找的内容，而 action 是在找到匹配内容时所执行的一系列命令。花括号（{}）不需要在程序中始终出现，但它们用于根据特定的模式对一系列指令进行分组。 pattern就是要表示的正则表达式，用斜杠括起来。</p>
<p>awk语言的最基本功能是在文件或者字符串中基于指定规则浏览和抽取信息，awk抽取信息后，才能进行其他文本操作。完整的awk脚本通常用来格式化文本文件中的信息。</p>
<p>通常，awk是以文件的一行为处理单位的。awk每接收文件的一行，然后执行相应的命令，来处理文本。</p>
<p>调用awk</p>
<p>有三种方式调用awk</p>
<p>复制代码 1.命令行方式 awk [-F field-separator] ‘commands’ input-file(s) 其中，commands 是真正awk命令，[-F域分隔符]是可选的。 input-file(s) 是待处理的文件。 在awk中，文件的每一行中，由域分隔符分开的每一项称为一个域。通常，在不指名-F域分隔符的情况下，默认的域分隔符是空格。 2.shell脚本方式 将所有的awk命令插入一个文件，并使awk程序可执行，然后awk命令解释器作为脚本的首行，一遍通过键入脚本名称来调用。 相当于shell脚本首行的：#!/bin/sh 可以换成：#!/bin/awk</p>
<p>3.将所有的awk命令插入一个单独文件，然后调用： awk -f awk-script-file input-file(s) 其中，-f选项加载awk-script-file中的awk脚本，input-file(s)跟上面的是一样的。</p>
<p>入门实例</p>
<p>假设last -n 5的输出如下</p>
<p>[root@www ~]# last -n 5 &lt;==仅取出前五行 root pts/1 192.168.1.100 Tue Feb 10 11:21 still logged in root pts/1 192.168.1.100 Tue Feb 10 00:46 - 02:28 (01:41) root pts/1 192.168.1.100 Mon Feb 9 11:41 - 18:30 (06:48) dmtsai pts/1 192.168.1.100 Mon Feb 9 11:41 - 11:41 (00:00) root tty1 Fri Sep 5 14:09 - 14:10 (00:01)</p>
<p>如果只是显示最近登录的5个帐号</p>
<p>last -n 5 | awk ‘{print $1}’</p>
<p>root root root dmtsai root</p>
<p>awk工作流程是这样的：读入有’\n’换行符分割的一条记录，然后将记录按指定的域分隔符划分域，填充域，$0则表示所有域,$1表示第一个域,$n表示第n个域。默认域分隔符是”空白键” 或 “[tab]键”,所以$1表示登录用户，$3表示登录用户ip,以此类推。</p>
<p>如果只是显示/etc/passwd的账户</p>
<p>cat /etc/passwd |awk -F ‘:’ ‘{print $1}’ root daemon bin sys</p>
<p>这种是awk+action的示例，每行都会执行action{print $1}。</p>
<p>-F指定域分隔符为’:’。</p>
<p>如果只是显示/etc/passwd的账户和账户对应的shell,而账户与shell之间以tab键分割</p>
<p>cat /etc/passwd |awk -F ‘:’ ‘{print $1”\t”$7}’ root /bin/bash daemon /bin/sh bin /bin/sh sys /bin/sh</p>
<p>如果只是显示/etc/passwd的账户和账户对应的shell,而账户与shell之间以逗号分割,而且在所有行添加列名name,shell,在最后一行添加”blue,/bin/nosh”。</p>
<p>cat /etc/passwd |awk -F ‘:’ ‘BEGIN {print “name,shell”} {print $1”,”$7} END {print “blue,/bin/nosh”}’ name,shell root,/bin/bash daemon,/bin/sh bin,/bin/sh sys,/bin/sh …. blue,/bin/nosh</p>
<p>awk工作流程是这样的：先执行BEGING，然后读取文件，读入有/n换行符分割的一条记录，然后将记录按指定的域分隔符划分域，填充域，$0则表示所有域,$1表示第一个域,$n表示第n个域,随后开始执行模式所对应的动作action。接着开始读入第二条记录······直到所有的记录都读完，最后执行END操作。</p>
<p>搜索/etc/passwd有root关键字的所有行</p>
<p>awk -F: ‘/root/‘ /etc/passwd root:x:0:0:root:/root:/bin/bash</p>
<p>这种是pattern的使用示例，匹配了pattern(这里是root)的行才会执行action(没有指定action，默认输出每行的内容)。</p>
<p>搜索支持正则，例如找root开头的: awk -F: ‘/^root/‘ /etc/passwd</p>
<p>搜索/etc/passwd有root关键字的所有行，并显示对应的shell</p>
<p>awk -F: ‘/root/{print $7}’ /etc/passwd</p>
<p>/bin/bash</p>
<p>这里指定了action{print $7}</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/linux-awk命令详解/" data-id="ciczy5jbe0005dgm3p4okd2v4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HTTP中Get与Post的区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/HTTP中Get与Post的区别/" class="article-date">
  <time datetime="2015-08-06T08:12:39.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/HTTP中Get与Post的区别/">HTTP中Get与Post的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Http定义了与服务器交互的不同方法，最基本的方法有4种，分别是GET，POST，PUT，DELETE。URL全称是资源描述符，我们可以这样认 为：一个URL地址，它用于描述一个网络上的资源，而HTTP中的GET，POST，PUT，DELETE就对应着对这个资源的查，改，增，删4个操作。GET一般用于获取/查询资源信息，而POST一般用于更新资源信息。根据HTTP规范，GET用于信息获取，而且应该是安全的和幂等的，POST表示可能修改变服务器上的资源的请求 在实际的做的时候，很多人却没有按照HTTP规范去做，比如说：</p>
<p>　　1.很多人贪方便，更新资源时用了GET，因为用POST必须要到FORM（表单），这样会麻烦一点。</p>
<p>　　2.对资源的增，删，改，查操作，其实都可以通过GET/POST完成，不需要用到PUT和DELETE。</p>
<p>看看GET和POST的区别：</p>
<p>1.GET请求的数据会附在URL之后（就是 把数据放置在HTTP协议头中），以?分割URL和传输数据，参数之间以&amp;相连，如：login.action?name=hyddd&amp; password=idontknow&amp;verify=%E4%BD%A0%E5%A5%BD。如果数据是英文字母/数字，原样发送，如果是空 格，转换为+，如果是中文/其他字符，则直接把字符串用BASE64加密，得出如：%E4%BD%A0%E5%A5%BD，其中％XX中的XX为该符号以 16进制表示的ASCII。 POST把提交的数据则放置在是HTTP包的包体中。</p>
<p>2.”GET方式提交的数据最多只能是1024字节，理论上POST没有限制，可传较大量的数据，IIS4中最大为80KB，IIS5中为100KB”</p>
<p>3.POST的安全性要比GET的安全性高。注 意：这里所说的安全性和上面GET提到的“安全”不是同个概念。上面“安全”的含义仅仅是不作数据修改，而这里安全的含义是真正的Security的含 义，比如：通过GET提交数据，用户名和密码将明文出现在URL上，因为(1)登录页面有可能被浏览器缓存，(2)其他人查看浏览器的历史纪录，那么别人 就可以拿到你的账号和密码了，除此之外，使用GET提交数据还可能会造成Cross-site request forgery攻击。</p>
<p>　　总结一下，Get是向服务器发索取数据的一种请求，而Post是向服务器提交数据的一种请求，在FORM（表单）中，Method默认为”GET”，实质上，GET和POST只是发送机制不同，并不是一个取一个发！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/HTTP中Get与Post的区别/" data-id="ciczy5jbe0007dgm34yakqlt0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-帮付宝模块分析之批量代收付" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/帮付宝模块分析之批量代收付/" class="article-date">
  <time datetime="2015-08-06T07:59:00.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/帮付宝模块分析之批量代收付/">帮付宝模块分析之批量代收付 </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>从c-team调出之后，一直在学习代收付的东西，所以今天就写点批量代收付的内容，这部分内容不多，但是对支付平台而言算是支付核心的一部分。从用途方面来说，可能只对c-team在剥离商户门户时才能用到，其他感兴趣的同学可以大概看看。</p>
<p>目前，对商户而言有两种方式实现批量代收付，一种是在商户门户上传文件，一种是连接代收付接口。无论哪种方式对于代收付系统而言后台处理逻辑相差无几。所以，我们以商户门户上传文件为例说明代收付流程以及涉及到的数据库表。</p>
<p>批量代收付模块涉及主要表有五个:（TAMTMSFJNL）商户批次明细表、（TAMTMSFCT）商户批次总控表、（WDCTORDR）提现订单表、（CAPTXNJNL）代收付流水表、（CAPBATINF）代收付外发批次表。整体代收付流程请参照下图1(参考1)：<br><img src="/images/doc/pay.png" alt="daifu"><br>首先，商户制作报盘文件，文件格式是有帮付宝自定义的格式”.i”文件，文件的内容格式也是由帮付宝自定义。详情请参照《批量代收付文档规范》(参考2),报盘文件制作完成之后，商户在商户门户上传报盘文件（步骤1），文件上传之后，支付系统会检查文件的有效性、商户的有效性、计算费率、风控查询（步骤3）等等，如果上面的内容都检查没有问题，则将文件内容以及计算的费率一起入代收付总控表和代收付明细表（步骤2）。这时，商户管理员登陆商户门户，在商户门户查看刚才上传批次内容，如果确认批次内容正确无误商户管理员点击通过之后，系统将批次文件中的每条记录全部插入到提现订单表（步骤5）。风控操作人员审批之后财务人员再次审批，其实审批过程是修改提现订单表的交易状态（步骤6、步骤7）。风控人员和财务人员在对提现订单表中交易进行操作，无论何种结果，系统都会将交易状态同步到代收付总控表和代收付明细表（步骤8）。风控人员和财务人员对提现订单表中交易审批通过之后，系统将这些交易插入到代收付网关流水表（步骤9）。这时，等待系统定时任务，按照代收付外发控制表的参数信息对代收付网关流水表进行筛选，将筛选的交易进行打包发给银行进行处理。</p>
<p>然后，经过10到20分钟，银行会给帮付宝回盘，回盘之后系统根据回盘信息对系统代收付网关流水表、代收付外发控制表、代收付总控表、批量代收付明细表、提现订单表中的交易状态进行修改（步骤11、步骤12）。</p>
<p>最后，商户在商户门户可以按照批次下载对应的回盘文件。本次批量交易完成。</p>
<p>上面简述了商户在商户门户上传文件的方式报盘，对于接口方式而言，以报文的方式将发给帮付宝，完成上图的步骤2，这种方式没有步骤4，也就说不需要商户审核了。数据库内容可以参照payadm.doc(参考3)文档.以上就是批量代收付数据流程，各位有什么疑问可以联系我，一起探讨探讨。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/帮付宝模块分析之批量代收付/" data-id="ciczy5jaz0001dgm37hx5qxc1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-跨行转账交易通道" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/跨行转账交易通道/" class="article-date">
  <time datetime="2015-08-06T07:53:32.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/跨行转账交易通道/">跨行转账交易通道</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>跨行转账交易通道</p>
<p>在帮付宝项目实施过程中，涉及到很多银行，清算系统相关的业务知识。在此进行简单的梳理。 这边文章主要从用户个人视角展现了跨行清算的处理流程以及现有实际存在的跨行清算系统的相关说明。</p>
<p>跨行清算系统形成的原因 以个人跨行汇款为例进行说明 张三是建设银行持卡人，想从建设银行汇款100元到工商银行。 一个简单的如下图所示的流程就出现了。</p>
<p>这张简单的流程图只是简单的解释了交易请求是如何转发的，阐述了张三和李四各自从用户视角看到的实际情况（张三账户少了100元，李四账户多了100元）。由此引申出两个问题：一 建设银行在什么时间把这100元实际的给工商银行？ 二 如果有工行，招行，民生等其他银行怎么办，逐一的去实现直连么？</p>
<p>为了解决上述的两个主要问题，清算组织出现了。 现有国内外主要清算组织： 人民银行大小额以及网上支付清算系统，银联，VISA，MasterCard，JCB等。 其中人行二代支付系统和银联成为国内主要的跨行清结算处理通道。 有了跨行结算通道，交易流程就变成了如下图所示：</p>
<p>通过清算组织的主机系统，可以实现统一单点接入，全面受理的要求。同时，对于接入方实施工作也减少了很多。另外，清算组织会有响应的业务处理规矩，对于各个银行间争议的解决也提供了标准化的流程，减少了很多的工作量。</p>
<p>主要国内跨行清算通道 人民银行跨行清算系统 中国人民银行建设并运营的跨行支付运营清算系统。</p>
<p>和支付业务相关的系统包括：  大额支付系统 5万元以上金额，实时到帐，定场清算（下午17：00），仅支持工作时间（非7x24）  小额支付系统 批量提交，批量处理，定期清算（每日多次），7x24小时工作。  网上支付跨行清算系统（超级网银） 实时到帐，5万元以下，7x24小时工作，覆盖大部分银行，仅支持对私账户转账和归集。</p>
<p>中国银联 CUPS 中国银联系统主要支持跨行银行卡交易受理并提供相应的清结算服务。</p>
<p>主要特点：  支持ATM，POS跨行交易。  通过卡BIN识别发卡行并进行交易转接。  提供国际清算网络转接（VISA，MASTERCARD,JCB）和代理清结算服务（代收付和增值业务）  通过人民银行大额系统完成成员行的头寸划拨以及直连商户资金结算。属于人民银行支付清算系统特殊参与者。</p>
<p>各结算支付公司 金联万家，深圳金融电子结算中心等经过人民银行批准，作为人民银行支付系统直接特许参与者，通过人行支付系统实现跨行结算服务。 这种通道一般不涉及到实际账务。 第三方支付公司 随着第三方支付公司的不断发展，特别是接入银行的增多。第三方支付公司已经实质上可以利用在各个银行的备付金以及接入的跨行结算通道完成对公对私的跨行清结算服务。</p>
<p>如上图所示：  汇款双方都是直连银行的情况下，可以简单的通过两个银行备付金的增减实现跨行资金结算服务。  当收款行不是直连银行的情况下，可以通过主备付金银行的跨行通道（人民银行支付系统）进行跨行汇款，从而实现非直连银行的跨行结算服务。  当汇款行是非直连银行的时候，需要持卡人先将钱转入个人账户（备付金）后，再进行相关的操作。</p>
<p>关于资金结算 看了这么多，本文一开始提到的问题一似乎还没有得到解答。跨行资金结算服务中，钱是什么时间怎么转移到收款行的呢？交易结束时，只是A银行账户-100，B银行账户+100这么简单么？如果B银行自己给自己加了200元怎么办，人民币就是这么创造出来的么？ 显然不是这么简单的。 在国内，所有的跨行结算通道都是通过各个成员在人民银行开设的备付金账户实现的。（银联跨行结算依赖于人行大额系统）。 例如前面例子，建行转账给工商银行，实际上建行欠工行100元。这个过程由人行系统完成，即：借记建设银行备付金账户100元 贷记工商银行备付金账户100元</p>
<p>假设当日只有这一笔交易，则日终时，建行管理人员看到的备付金账户余额少了100，工行管理人员看到的备付金账户余额多了100，如果实际交易时给持卡人+200的话，实际上相当于工行自己垫付了100，这个多出来的钱在日终对账和相关账务检查时可以被发现。</p>
<p>总结 本文主要介绍了帮付宝系统对接中主要用到的一些相关系统的知识，还只是表面内容。后续会陆续更新各个详细系统的特性，接入方式等相关信息。 另外，从国内清结算系统的发展历程来看和国际上相应的清算组织以及其他货币的结算服务系统还有一定的差距，有兴趣的同事可以逐步了解国外相应系统的部署设计以及业务处理逻辑，对了解国内系统有一定的帮助。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/跨行转账交易通道/" data-id="ciczy5jaz0000dgm3w655ahbh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/hello-world/" class="article-date">
  <time datetime="2015-08-06T07:02:58.210Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/06/hello-world/" data-id="ciczy5jbe0006dgm3znrsic3i" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/08/06/youku/">youku</a>
          </li>
        
          <li>
            <a href="/2015/08/06/利用Spring-Boot-快速搭建项/">利用Spring Boot 快速搭建项</a>
          </li>
        
          <li>
            <a href="/2015/08/06/关于软件设计阶段需求分析与设计的一点看法/">关于软件设计阶段需求分析与设计的一点看法</a>
          </li>
        
          <li>
            <a href="/2015/08/06/linux-awk命令详解/">linux awk命令详解</a>
          </li>
        
          <li>
            <a href="/2015/08/06/HTTP中Get与Post的区别/">HTTP中Get与Post的区别</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 lihua wang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>